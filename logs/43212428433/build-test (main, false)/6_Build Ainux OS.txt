2025-08-09T10:54:42.7667036Z ##[group]Run chmod +x ainux-builder.sh
2025-08-09T10:54:42.7667355Z [36;1mchmod +x ainux-builder.sh[0m
2025-08-09T10:54:42.7667578Z [36;1m[0m
2025-08-09T10:54:42.7667740Z [36;1m# Add debug output[0m
2025-08-09T10:54:42.7667962Z [36;1mset -x[0m
2025-08-09T10:54:42.7668133Z [36;1m[0m
2025-08-09T10:54:42.7668318Z [36;1m# Run build with timeout (2 hours max)[0m
2025-08-09T10:54:42.7668601Z [36;1mtimeout 7200 ./ainux-builder.sh || {[0m
2025-08-09T10:54:42.7668864Z [36;1m  echo "Build timed out or failed"[0m
2025-08-09T10:54:42.7669150Z [36;1m  echo "=== Last 100 lines of any available logs ==="[0m
2025-08-09T10:54:42.7669823Z [36;1m  find ~/ainux-build/logs -name "*.log" -exec tail -50 {} \; 2>/dev/null || echo "No log files found"[0m
2025-08-09T10:54:42.7670235Z [36;1m  [0m
2025-08-09T10:54:42.7670429Z [36;1m  echo "=== Environment Variables ==="[0m
2025-08-09T10:54:42.7670749Z [36;1m  env | grep -E "(CLUSTER_MODE|ENABLE_GUI|SKIP_|BUILD_)" || true[0m
2025-08-09T10:54:42.7671051Z [36;1m  [0m
2025-08-09T10:54:42.7671246Z [36;1m  echo "=== Disk Usage ==="[0m
2025-08-09T10:54:42.7671478Z [36;1m  df -h || true[0m
2025-08-09T10:54:42.7671659Z [36;1m  [0m
2025-08-09T10:54:42.7671832Z [36;1m  echo "=== Memory Usage ==="[0m
2025-08-09T10:54:42.7672055Z [36;1m  free -h || true[0m
2025-08-09T10:54:42.7672242Z [36;1m  [0m
2025-08-09T10:54:42.7672391Z [36;1m  exit 1[0m
2025-08-09T10:54:42.7672551Z [36;1m}[0m
2025-08-09T10:54:42.7697116Z shell: /usr/bin/bash -e {0}
2025-08-09T10:54:42.7697329Z env:
2025-08-09T10:54:42.7697491Z   CLUSTER_MODE: main
2025-08-09T10:54:42.7697668Z   ENABLE_GUI: false
2025-08-09T10:54:42.7697847Z   SKIP_QEMU_TEST: true
2025-08-09T10:54:42.7698023Z   BUILD_THREADS: 2
2025-08-09T10:54:42.7698205Z   SKIP_CONNECTIVITY_CHECK: true
2025-08-09T10:54:42.7698408Z ##[endgroup]
2025-08-09T10:54:42.7750073Z + timeout 7200 ./ainux-builder.sh
2025-08-09T10:54:42.7843647Z 
2025-08-09T10:54:42.7844249Z [0;35m[PHASE][0m Starting Ainux OS AI Cluster Builder Process
2025-08-09T10:54:42.7844677Z 
2025-08-09T10:54:42.7844684Z 
2025-08-09T10:54:42.7844873Z [0;35m[PHASE][0m Checking Prerequisites
2025-08-09T10:54:42.7845073Z 
2025-08-09T10:54:42.7890825Z [0;34m[INFO][0m Detected Ubuntu 22.04 LTS - supported
2025-08-09T10:54:42.7918733Z [0;34m[INFO][0m Disk space check passed: 36GB available
2025-08-09T10:54:42.7919153Z [0;34m[INFO][0m Checking internet connectivity...
2025-08-09T10:54:42.7919974Z [1;33m[WARNING][0m Skipping connectivity check (SKIP_CONNECTIVITY_CHECK=true)
2025-08-09T10:54:42.7920675Z [0;32m[SUCCESS][0m Prerequisites check passed
2025-08-09T10:54:42.7920953Z 
2025-08-09T10:54:42.7921232Z [0;35m[PHASE][0m Initializing Ainux OS AI Cluster Build Environment
2025-08-09T10:54:42.7921549Z 
2025-08-09T10:54:42.7921687Z [0;34m[INFO][0m Build Configuration:
2025-08-09T10:54:42.7921968Z [0;34m[INFO][0m   Kernel Version: 6.6.58
2025-08-09T10:54:42.7922238Z [0;34m[INFO][0m   Cluster Mode: main
2025-08-09T10:54:42.7922488Z [0;34m[INFO][0m   Build Threads: 2
2025-08-09T10:54:42.7922982Z [0;34m[INFO][0m   GUI Enabled: false
2025-08-09T10:54:42.7923299Z [0;34m[INFO][0m   Build Directory: /home/runner/ainux-build
2025-08-09T10:54:42.7923659Z [0;34m[INFO][0m Installing build dependencies...
2025-08-09T10:54:42.7924037Z [0;34m[INFO][0m Detected CI environment - applying optimizations...
2025-08-09T10:54:44.3280461Z 
2025-08-09T10:54:44.3281183Z WARNING: apt does not have a stable CLI interface. Use with caution in scripts.
2025-08-09T10:54:44.3281556Z 
2025-08-09T10:54:44.3667950Z Reading package lists...
2025-08-09T10:54:44.5427310Z Building dependency tree...
2025-08-09T10:54:44.5440029Z Reading state information...
2025-08-09T10:54:44.6868913Z bc is already the newest version (1.07.1-3build1).
2025-08-09T10:54:44.6869704Z bison is already the newest version (2:3.8.2+dfsg-1build1).
2025-08-09T10:54:44.6870480Z build-essential is already the newest version (12.9ubuntu3).
2025-08-09T10:54:44.6871259Z dosfstools is already the newest version (4.2-1build3).
2025-08-09T10:54:44.6872567Z flex is already the newest version (2.6.4-8build2).
2025-08-09T10:54:44.6873116Z gcc is already the newest version (4:11.2.0-1ubuntu1).
2025-08-09T10:54:44.6873745Z genisoimage is already the newest version (9:1.1.11-3.2ubuntu1).
2025-08-09T10:54:44.6874366Z make is already the newest version (4.3-4.1build1).
2025-08-09T10:54:44.6874996Z mtools is already the newest version (4.0.33-1+really4.0.32-1build1).
2025-08-09T10:54:44.6875588Z pv is already the newest version (1.6.6-1build2).
2025-08-09T10:54:44.6875989Z squashfs-tools is already the newest version (1:4.5-3build1).
2025-08-09T10:54:44.6876497Z isolinux is already the newest version (3:6.04~git20190206.bf6db5b4+dfsg1-3ubuntu1).
2025-08-09T10:54:44.6877105Z syslinux-utils is already the newest version (3:6.04~git20190206.bf6db5b4+dfsg1-3ubuntu1).
2025-08-09T10:54:44.6877591Z xorriso is already the newest version (1.5.4-2).
2025-08-09T10:54:44.6877953Z curl is already the newest version (7.81.0-1ubuntu1.20).
2025-08-09T10:54:44.6878403Z debootstrap is already the newest version (1.0.126+nmu1ubuntu0.8).
2025-08-09T10:54:44.6878912Z grub-efi-amd64-bin is already the newest version (2.06-2ubuntu14.8).
2025-08-09T10:54:44.6879361Z grub-pc-bin is already the newest version (2.06-2ubuntu7.2).
2025-08-09T10:54:44.6879965Z libelf-dev is already the newest version (0.186-1ubuntu0.1).
2025-08-09T10:54:44.6880393Z libncurses-dev is already the newest version (6.3-2ubuntu0.1).
2025-08-09T10:54:44.6880819Z libssl-dev is already the newest version (3.0.2-0ubuntu1.19).
2025-08-09T10:54:44.6881269Z live-build is already the newest version (3.0~a57-1ubuntu41.22.04.1).
2025-08-09T10:54:44.6881756Z qemu-system-x86 is already the newest version (1:6.2+dfsg-2ubuntu6.26).
2025-08-09T10:54:44.6882204Z rsync is already the newest version (3.2.7-0ubuntu0.22.04.4).
2025-08-09T10:54:44.6882599Z wget is already the newest version (1.21.2-2ubuntu1.1).
2025-08-09T10:54:44.6882990Z nmap is already the newest version (7.91+dfsg1+really7.80+dfsg1-2ubuntu0.1).
2025-08-09T10:54:44.6883412Z python3-pip is already the newest version (22.0.2+dfsg-1ubuntu0.6).
2025-08-09T10:54:44.6883778Z git is already the newest version (1:2.50.1-0ppa1~ubuntu22.04.1).
2025-08-09T10:54:44.7231467Z The following NEW packages will be installed:
2025-08-09T10:54:44.7235607Z   dialog
2025-08-09T10:54:44.7522506Z 0 upgraded, 1 newly installed, 0 to remove and 16 not upgraded.
2025-08-09T10:54:44.7849043Z Need to get 303 kB of archives.
2025-08-09T10:54:44.7849909Z After this operation, 1258 kB of additional disk space will be used.
2025-08-09T10:54:44.7850488Z Get:1 file:/etc/apt/apt-mirrors.txt Mirrorlist [144 B]
2025-08-09T10:54:44.8176128Z Get:2 http://azure.archive.ubuntu.com/ubuntu jammy/universe amd64 dialog amd64 1.3-20211214-1 [303 kB]
2025-08-09T10:54:45.1331638Z Fetched 303 kB in 0s (5502 kB/s)
2025-08-09T10:54:45.1541051Z Selecting previously unselected package dialog.
2025-08-09T10:54:45.1617336Z (Reading database ... 
2025-08-09T10:54:45.1617813Z (Reading database ... 5%
2025-08-09T10:54:45.1618508Z (Reading database ... 10%
2025-08-09T10:54:45.1618856Z (Reading database ... 15%
2025-08-09T10:54:45.1619177Z (Reading database ... 20%
2025-08-09T10:54:45.1619682Z (Reading database ... 25%
2025-08-09T10:54:45.1620005Z (Reading database ... 30%
2025-08-09T10:54:45.1620332Z (Reading database ... 35%
2025-08-09T10:54:45.1620651Z (Reading database ... 40%
2025-08-09T10:54:45.1620983Z (Reading database ... 45%
2025-08-09T10:54:45.1621318Z (Reading database ... 50%
2025-08-09T10:54:45.1671302Z (Reading database ... 55%
2025-08-09T10:54:45.1702398Z (Reading database ... 60%
2025-08-09T10:54:45.1721913Z (Reading database ... 65%
2025-08-09T10:54:45.1800305Z (Reading database ... 70%
2025-08-09T10:54:45.1962847Z (Reading database ... 75%
2025-08-09T10:54:45.1989723Z (Reading database ... 80%
2025-08-09T10:54:45.2251326Z (Reading database ... 85%
2025-08-09T10:54:45.2326626Z (Reading database ... 90%
2025-08-09T10:54:45.2474895Z (Reading database ... 95%
2025-08-09T10:54:45.2475364Z (Reading database ... 100%
2025-08-09T10:54:45.2476469Z (Reading database ... 270634 files and directories currently installed.)
2025-08-09T10:54:45.2527186Z Preparing to unpack .../dialog_1.3-20211214-1_amd64.deb ...
2025-08-09T10:54:45.2543773Z Unpacking dialog (1.3-20211214-1) ...
2025-08-09T10:54:45.4154635Z Setting up dialog (1.3-20211214-1) ...
2025-08-09T10:54:45.4184423Z Processing triggers for man-db (2.10.2-1) ...
2025-08-09T10:54:45.9629189Z NEEDRESTART-VER: 3.5
2025-08-09T10:54:46.1937859Z NEEDRESTART-KCUR: 6.8.0-1031-azure
2025-08-09T10:54:46.1938384Z NEEDRESTART-KEXP: 6.8.0-1031-azure
2025-08-09T10:54:46.1938762Z NEEDRESTART-KSTA: 1
2025-08-09T10:54:46.1939147Z NEEDRESTART-SVC: hosted-compute-agent.service
2025-08-09T10:54:47.4982048Z [0;34m[INFO][0m Applying CI space optimizations...
2025-08-09T10:54:48.4071461Z Reading package lists...
2025-08-09T10:54:48.5815502Z Building dependency tree...
2025-08-09T10:54:48.5827839Z Reading state information...
2025-08-09T10:54:48.7158180Z The following packages will be REMOVED:
2025-08-09T10:54:48.7158999Z   apport-symptoms landscape-common libintl-perl libintl-xs-perl libisns0
2025-08-09T10:54:48.7160084Z   liblldb-13 liblldb-15 libmodule-find-perl libmodule-scandeps-perl libmspack0
2025-08-09T10:54:48.7161065Z   libopeniscsiusr libproc-processtable-perl libsort-naturally-perl
2025-08-09T10:54:48.7162351Z   libterm-readkey-perl libxmlsec1 libxmlsec1-openssl lxd-agent-loader
2025-08-09T10:54:48.7163118Z   needrestart open-iscsi open-vm-tools python3-apport python3-automat
2025-08-09T10:54:48.7163861Z   python3-bcrypt python3-click python3-colorama python3-constantly
2025-08-09T10:54:48.7164563Z   python3-hamcrest python3-hyperlink python3-incremental
2025-08-09T10:54:48.7165258Z   python3-problem-report python3-pyasn1 python3-pyasn1-modules
2025-08-09T10:54:48.7165934Z   python3-service-identity python3-systemd python3-twisted
2025-08-09T10:54:48.7166544Z   python3-zope.interface zerofree
2025-08-09T10:54:48.9781961Z 0 upgraded, 0 newly installed, 37 to remove and 14 not upgraded.
2025-08-09T10:54:48.9782613Z After this operation, 62.7 MB disk space will be freed.
2025-08-09T10:54:49.0004030Z (Reading database ... 
2025-08-09T10:54:49.0004448Z (Reading database ... 5%
2025-08-09T10:54:49.0022178Z (Reading database ... 10%
2025-08-09T10:54:49.0022613Z (Reading database ... 15%
2025-08-09T10:54:49.0022942Z (Reading database ... 20%
2025-08-09T10:54:49.0023269Z (Reading database ... 25%
2025-08-09T10:54:49.0023567Z (Reading database ... 30%
2025-08-09T10:54:49.0023798Z (Reading database ... 35%
2025-08-09T10:54:49.0024017Z (Reading database ... 40%
2025-08-09T10:54:49.0024217Z (Reading database ... 45%
2025-08-09T10:54:49.0024410Z (Reading database ... 50%
2025-08-09T10:54:49.0064714Z (Reading database ... 55%
2025-08-09T10:54:49.0096950Z (Reading database ... 60%
2025-08-09T10:54:49.0117065Z (Reading database ... 65%
2025-08-09T10:54:49.0196553Z (Reading database ... 70%
2025-08-09T10:54:49.0358592Z (Reading database ... 75%
2025-08-09T10:54:49.0386141Z (Reading database ... 80%
2025-08-09T10:54:49.0656254Z (Reading database ... 85%
2025-08-09T10:54:49.0734708Z (Reading database ... 90%
2025-08-09T10:54:49.0884860Z (Reading database ... 95%
2025-08-09T10:54:49.0885240Z (Reading database ... 100%
2025-08-09T10:54:49.0885725Z (Reading database ... 270787 files and directories currently installed.)
2025-08-09T10:54:49.0937857Z Removing apport-symptoms (0.24) ...
2025-08-09T10:54:49.1162717Z Removing landscape-common (23.02-0ubuntu1~22.04.4) ...
2025-08-09T10:54:49.2346616Z Removing libintl-xs-perl (1.26-3build2) ...
2025-08-09T10:54:49.2557423Z Removing needrestart (3.5-5ubuntu2.4) ...
2025-08-09T10:54:49.2986219Z Removing libintl-perl (1.26-3build2) ...
2025-08-09T10:54:49.3285185Z Removing open-iscsi (2.1.5-1ubuntu1.1) ...
2025-08-09T10:54:49.4833841Z Warning: Stopping iscsid.service, but it can still be activated by:
2025-08-09T10:54:49.4834499Z   iscsid.socket
2025-08-09T10:54:50.8449264Z Removing libisns0:amd64 (0.101-0ubuntu2) ...
2025-08-09T10:54:50.8696500Z Removing liblldb-13 (1:13.0.1-2ubuntu2.2) ...
2025-08-09T10:54:50.8971257Z Removing liblldb-15 (1:15.0.7-0ubuntu0.22.04.3) ...
2025-08-09T10:54:50.9282951Z Removing libmodule-find-perl (0.15-1) ...
2025-08-09T10:54:50.9479618Z Removing libmodule-scandeps-perl (1.31-1ubuntu0.1) ...
2025-08-09T10:54:50.9644982Z Removing open-vm-tools (2:12.3.5-3~ubuntu0.22.04.2) ...
2025-08-09T10:54:51.9034578Z Removing libmspack0:amd64 (0.10.1-2build2) ...
2025-08-09T10:54:51.9207555Z Removing libopeniscsiusr (2.1.5-1ubuntu1.1) ...
2025-08-09T10:54:51.9379159Z Removing libproc-processtable-perl:amd64 (0.634-1build1) ...
2025-08-09T10:54:51.9550569Z Removing libsort-naturally-perl (1.03-2) ...
2025-08-09T10:54:51.9730414Z Removing libterm-readkey-perl (2.38-1build4) ...
2025-08-09T10:54:51.9889049Z Removing libxmlsec1-openssl:amd64 (1.2.33-1build2) ...
2025-08-09T10:54:52.0066261Z Removing libxmlsec1:amd64 (1.2.33-1build2) ...
2025-08-09T10:54:52.0225634Z Removing lxd-agent-loader (0.5) ...
2025-08-09T10:54:52.4893052Z Removing python3-apport (2.20.11-0ubuntu82.9) ...
2025-08-09T10:54:52.5852695Z Removing python3-twisted (22.1.0-2ubuntu2.6) ...
2025-08-09T10:54:52.9242064Z Removing python3-automat (20.2.0-1) ...
2025-08-09T10:54:53.0150317Z Removing python3-bcrypt (3.2.0-1build1) ...
2025-08-09T10:54:53.0998667Z Removing python3-click (8.0.3-1) ...
2025-08-09T10:54:53.1922957Z Removing python3-colorama (0.4.4-1) ...
2025-08-09T10:54:53.2795668Z Removing python3-constantly (15.1.0-2) ...
2025-08-09T10:54:53.3657494Z Removing python3-hamcrest (2.0.2-2) ...
2025-08-09T10:54:53.4912283Z Removing python3-hyperlink (21.0.0-3) ...
2025-08-09T10:54:53.5840045Z Removing python3-incremental (21.3.0-1) ...
2025-08-09T10:54:53.6763295Z Removing python3-problem-report (2.20.11-0ubuntu82.9) ...
2025-08-09T10:54:53.7640339Z Removing python3-service-identity (18.1.0-6) ...
2025-08-09T10:54:53.8508346Z Removing python3-pyasn1-modules (0.2.1-1) ...
2025-08-09T10:54:53.9431074Z Removing python3-pyasn1 (0.4.8-1) ...
2025-08-09T10:54:54.0368297Z Removing python3-systemd (234-3ubuntu2) ...
2025-08-09T10:54:54.1365473Z Removing python3-zope.interface (5.4.0-1build1) ...
2025-08-09T10:54:54.2391445Z Removing zerofree (1.1.1-1build3) ...
2025-08-09T10:54:54.2901155Z Processing triggers for libc-bin (2.35-0ubuntu3.10) ...
2025-08-09T10:54:54.3064920Z Processing triggers for man-db (2.10.2-1) ...
2025-08-09T10:54:54.6388566Z Processing triggers for initramfs-tools (0.140ubuntu13.5) ...
2025-08-09T10:54:54.6764058Z update-initramfs: Generating /boot/initrd.img-6.8.0-1031-azure
2025-08-09T10:55:04.2550249Z [0;32m[SUCCESS][0m Build environment initialized
2025-08-09T10:55:04.2552099Z 
2025-08-09T10:55:04.2552599Z [0;35m[PHASE][0m Building Custom Kernel 6.6.58 with AI Optimizations
2025-08-09T10:55:04.2552976Z 
2025-08-09T10:55:04.2553223Z [0;34m[INFO][0m Downloading Linux kernel 6.6.58...
2025-08-09T10:55:04.2553687Z [0;34m[INFO][0m CI environment detected - using optimized download strategy
2025-08-09T10:55:04.2554153Z [0;34m[INFO][0m Downloading kernel tarball (faster than git clone)...
2025-08-09T10:55:04.2778008Z --2025-08-09 10:55:04--  https://www.kernel.org/pub/linux/kernel/v6.x/linux-6.6.58.tar.xz
2025-08-09T10:55:04.4601932Z Resolving www.kernel.org (www.kernel.org)... 146.75.29.55, 2a04:4e42:77::311
2025-08-09T10:55:04.4611071Z Connecting to www.kernel.org (www.kernel.org)|146.75.29.55|:443... connected.
2025-08-09T10:55:04.4713740Z HTTP request sent, awaiting response... 200 OK
2025-08-09T10:55:04.4714303Z Length: 140387240 (134M) [application/x-xz]
2025-08-09T10:55:04.4714946Z Saving to: ‘linux-6.6.58.tar.xz’
2025-08-09T10:55:04.4729865Z 
2025-08-09T10:55:04.4870134Z      0K ........ ........ ........ ........ ........ ........  2%  199M 1s
2025-08-09T10:55:04.4993683Z   3072K ........ ........ ........ ........ ........ ........  4%  236M 1s
2025-08-09T10:55:04.5111032Z   6144K ........ ........ ........ ........ ........ ........  6%  256M 1s
2025-08-09T10:55:04.5224724Z   9216K ........ ........ ........ ........ ........ ........  8%  270M 1s
2025-08-09T10:55:04.5334791Z  12288K ........ ........ ........ ........ ........ ........ 11%  266M 0s
2025-08-09T10:55:04.5445107Z  15360K ........ ........ ........ ........ ........ ........ 13%  271M 0s
2025-08-09T10:55:04.5557285Z  18432K ........ ........ ........ ........ ........ ........ 15%  267M 0s
2025-08-09T10:55:04.5670681Z  21504K ........ ........ ........ ........ ........ ........ 17%  273M 0s
2025-08-09T10:55:04.5796677Z  24576K ........ ........ ........ ........ ........ ........ 20%  232M 0s
2025-08-09T10:55:04.5914094Z  27648K ........ ........ ........ ........ ........ ........ 22%  255M 0s
2025-08-09T10:55:04.6042826Z  30720K ........ ........ ........ ........ ........ ........ 24%  233M 0s
2025-08-09T10:55:04.6159626Z  33792K ........ ........ ........ ........ ........ ........ 26%  267M 0s
2025-08-09T10:55:04.6271776Z  36864K ........ ........ ........ ........ ........ ........ 29%  264M 0s
2025-08-09T10:55:04.6384018Z  39936K ........ ........ ........ ........ ........ ........ 31%  262M 0s
2025-08-09T10:55:04.6502238Z  43008K ........ ........ ........ ........ ........ ........ 33%  255M 0s
2025-08-09T10:55:04.6612120Z  46080K ........ ........ ........ ........ ........ ........ 35%  277M 0s
2025-08-09T10:55:04.6724440Z  49152K ........ ........ ........ ........ ........ ........ 38%  265M 0s
2025-08-09T10:55:04.6851814Z  52224K ........ ........ ........ ........ ........ ........ 40%  233M 0s
2025-08-09T10:55:04.7058669Z  55296K ........ ........ ........ ........ ........ ........ 42%  145M 0s
2025-08-09T10:55:04.7118969Z  58368K ........ ........ ........ ........ ........ ........ 44%  499M 0s
2025-08-09T10:55:04.7197114Z  61440K ........ ........ ........ ........ ........ ........ 47%  399M 0s
2025-08-09T10:55:04.7321187Z  64512K ........ ........ ........ ........ ........ ........ 49%  236M 0s
2025-08-09T10:55:04.7432401Z  67584K ........ ........ ........ ........ ........ ........ 51%  269M 0s
2025-08-09T10:55:04.7551691Z  70656K ........ ........ ........ ........ ........ ........ 53%  258M 0s
2025-08-09T10:55:04.7666918Z  73728K ........ ........ ........ ........ ........ ........ 56%  262M 0s
2025-08-09T10:55:04.7779886Z  76800K ........ ........ ........ ........ ........ ........ 58%  258M 0s
2025-08-09T10:55:04.7890986Z  79872K ........ ........ ........ ........ ........ ........ 60%  270M 0s
2025-08-09T10:55:04.8050086Z  82944K ........ ........ ........ ........ ........ ........ 62%  193M 0s
2025-08-09T10:55:04.8171096Z  86016K ........ ........ ........ ........ ........ ........ 64%  244M 0s
2025-08-09T10:55:04.8292052Z  89088K ........ ........ ........ ........ ........ ........ 67%  245M 0s
2025-08-09T10:55:04.8420143Z  92160K ........ ........ ........ ........ ........ ........ 69%  234M 0s
2025-08-09T10:55:04.8547482Z  95232K ........ ........ ........ ........ ........ ........ 71%  243M 0s
2025-08-09T10:55:04.8686921Z  98304K ........ ........ ........ ........ ........ ........ 73%  210M 0s
2025-08-09T10:55:04.8814134Z 101376K ........ ........ ........ ........ ........ ........ 76%  235M 0s
2025-08-09T10:55:04.8950550Z 104448K ........ ........ ........ ........ ........ ........ 78%  229M 0s
2025-08-09T10:55:04.9082631Z 107520K ........ ........ ........ ........ ........ ........ 80%  217M 0s
2025-08-09T10:55:04.9220855Z 110592K ........ ........ ........ ........ ........ ........ 82%  218M 0s
2025-08-09T10:55:04.9340168Z 113664K ........ ........ ........ ........ ........ ........ 85%  250M 0s
2025-08-09T10:55:04.9459531Z 116736K ........ ........ ........ ........ ........ ........ 87%  251M 0s
2025-08-09T10:55:04.9580598Z 119808K ........ ........ ........ ........ ........ ........ 89%  255M 0s
2025-08-09T10:55:04.9697247Z 122880K ........ ........ ........ ........ ........ ........ 91%  250M 0s
2025-08-09T10:55:04.9811534Z 125952K ........ ........ ........ ........ ........ ........ 94%  263M 0s
2025-08-09T10:55:04.9930741Z 129024K ........ ........ ........ ........ ........ ........ 96%  251M 0s
2025-08-09T10:55:05.0052622Z 132096K ........ ........ ........ ........ ........ ........ 98%  253M 0s
2025-08-09T10:55:05.0116605Z 135168K ........ ........ ........ ......                    100%  275M=0.5s
2025-08-09T10:55:05.0116975Z 
2025-08-09T10:55:05.0117738Z 2025-08-09 10:55:05 (248 MB/s) - ‘linux-6.6.58.tar.xz’ saved [140387240/140387240]
2025-08-09T10:55:05.0118163Z 
2025-08-09T10:55:05.0129872Z [0;34m[INFO][0m ✓ Kernel tarball downloaded successfully from kernel.org
2025-08-09T10:55:05.0130658Z [0;34m[INFO][0m Extracting kernel source...
2025-08-09T10:55:14.3635916Z [0;32m[SUCCESS][0m Kernel source extracted successfully
2025-08-09T10:55:14.3636391Z [0;34m[INFO][0m Applying AI/NPU optimization patches...
2025-08-09T10:55:14.3679965Z [0;34m[INFO][0m Script directory: /home/runner/ainux-build/kernel/linux
2025-08-09T10:55:14.3680655Z [0;34m[INFO][0m Initial patch directory: /home/runner/ainux-build/kernel/linux/patches
2025-08-09T10:55:14.3685111Z [0;34m[INFO][0m Current working directory: /home/runner/ainux-build/kernel/linux
2025-08-09T10:55:14.3685635Z [0;34m[INFO][0m Script location: ./ainux-builder.sh
2025-08-09T10:55:14.3686063Z [0;34m[INFO][0m Primary patch directory not found, trying alternatives...
2025-08-09T10:55:14.3708649Z [0;34m[INFO][0m Found patches at CI path: /home/runner/work/ainux/ainux/patches
2025-08-09T10:55:14.3709234Z [0;34m[INFO][0m Using local patches from repository: /home/runner/work/ainux/ainux/patches
2025-08-09T10:55:14.3744490Z [0;34m[INFO][0m Available patches: 6.6-cluster-networking-simple 6.6-cluster-networking 6.6-npu-core-fix 6.6-npu-kconfig-fix 6.6-npu-support 6.6-rocm-optimizations-simple 6.6-rocm-optimizations 6.6-tpu-support tpu-integration 
2025-08-09T10:55:14.3745801Z [0;34m[INFO][0m Applying NPU support patch...
2025-08-09T10:55:14.3841367Z patching file drivers/Kconfig
2025-08-09T10:55:14.3841859Z Hunk #1 succeeded at 243 with fuzz 2 (offset 3 lines).
2025-08-09T10:55:14.3842341Z patching file drivers/Makefile
2025-08-09T10:55:14.3843476Z patching file drivers/npu/Kconfig
2025-08-09T10:55:14.3844188Z patch: **** malformed patch at line 114: diff --git a/drivers/npu/Makefile b/drivers/npu/Makefile
2025-08-09T10:55:14.3844639Z 
2025-08-09T10:55:14.3849256Z [1;33m[WARNING][0m NPU patch failed, continuing with build...
2025-08-09T10:55:14.3850182Z [0;34m[INFO][0m Applying simplified ROCm optimization patch...
2025-08-09T10:55:14.3863557Z patching file drivers/gpu/drm/amd/amdgpu/amdgpu_cs.c
2025-08-09T10:55:14.3863908Z Hunk #1 succeeded at 1274 with fuzz 3.
2025-08-09T10:55:14.3870429Z [0;34m[INFO][0m Applying simplified cluster networking patch...
2025-08-09T10:55:14.3886720Z patching file net/core/dev.c
2025-08-09T10:55:14.3892632Z Hunk #1 succeeded at 5354 with fuzz 2 (offset -166 lines).
2025-08-09T10:55:14.3899654Z [0;34m[INFO][0m Configuring kernel for AI workloads...
2025-08-09T10:55:14.4735122Z [0;34m[INFO][0m Applying AI hardware optimizations to kernel config...
2025-08-09T10:55:14.4735943Z [0;34m[INFO][0m Enabling mandatory NPU support for AI cluster...
2025-08-09T10:55:14.5668586Z [0;34m[INFO][0m Enabling mandatory AMD ROCm support...
2025-08-09T10:55:14.9766389Z   HOSTCC  scripts/basic/fixdep
2025-08-09T10:55:15.1330197Z   HOSTCC  scripts/kconfig/conf.o
2025-08-09T10:55:15.3003115Z   HOSTCC  scripts/kconfig/confdata.o
2025-08-09T10:55:15.5242278Z   HOSTCC  scripts/kconfig/expr.o
2025-08-09T10:55:15.7076790Z   LEX     scripts/kconfig/lexer.lex.c
2025-08-09T10:55:15.7702952Z   YACC    scripts/kconfig/parser.tab.[ch]
2025-08-09T10:55:15.9048677Z   HOSTCC  scripts/kconfig/lexer.lex.o
2025-08-09T10:55:16.1388801Z   HOSTCC  scripts/kconfig/menu.o
2025-08-09T10:55:16.2954994Z   HOSTCC  scripts/kconfig/parser.tab.o
2025-08-09T10:55:16.4868668Z   HOSTCC  scripts/kconfig/preprocess.o
2025-08-09T10:55:16.5863718Z   HOSTCC  scripts/kconfig/symbol.o
2025-08-09T10:55:16.8432872Z   HOSTCC  scripts/kconfig/util.o
2025-08-09T10:55:16.8894600Z   HOSTLD  scripts/kconfig/conf
2025-08-09T10:55:26.6266766Z drivers/Kconfig:246: can't open file "drivers/npu/Kconfig"
2025-08-09T10:55:26.6277109Z make[2]: *** [scripts/kconfig/Makefile:77: oldconfig] Error 1
2025-08-09T10:55:26.6280094Z make[1]: *** [/home/runner/ainux-build/kernel/linux/Makefile:697: oldconfig] Error 2
2025-08-09T10:55:26.6282350Z make: *** [Makefile:234: __sub-make] Error 2
2025-08-09T10:55:26.6290119Z + echo 'Build timed out or failed'
2025-08-09T10:55:26.6290526Z Build timed out or failed
2025-08-09T10:55:26.6290929Z + echo '=== Last 100 lines of any available logs ==='
2025-08-09T10:55:26.6291426Z === Last 100 lines of any available logs ===
2025-08-09T10:55:26.6295551Z + find /home/runner/ainux-build/logs -name '*.log' -exec tail -50 '{}' ';'
2025-08-09T10:55:26.6316559Z patching file net/core/dev.c
2025-08-09T10:55:26.6316893Z Hunk #1 succeeded at 5354 with fuzz 2 (offset -166 lines).
2025-08-09T10:55:26.6327154Z patching file drivers/Kconfig
2025-08-09T10:55:26.6327643Z Hunk #1 succeeded at 243 with fuzz 2 (offset 3 lines).
2025-08-09T10:55:26.6328040Z patching file drivers/Makefile
2025-08-09T10:55:26.6328296Z patching file drivers/npu/Kconfig
2025-08-09T10:55:26.6328710Z patch: **** malformed patch at line 114: diff --git a/drivers/npu/Makefile b/drivers/npu/Makefile
2025-08-09T10:55:26.6329037Z 
2025-08-09T10:55:26.6336839Z patching file drivers/gpu/drm/amd/amdgpu/amdgpu_cs.c
2025-08-09T10:55:26.6337158Z Hunk #1 succeeded at 1274 with fuzz 3.
2025-08-09T10:55:26.6340790Z + echo '=== Environment Variables ==='
2025-08-09T10:55:26.6341241Z === Environment Variables ===
2025-08-09T10:55:26.6342784Z + env
2025-08-09T10:55:26.6344772Z + grep -E '(CLUSTER_MODE|ENABLE_GUI|SKIP_|BUILD_)'
2025-08-09T10:55:26.6356867Z BUILD_THREADS=2
2025-08-09T10:55:26.6357235Z DOTNET_SKIP_FIRST_TIME_EXPERIENCE=1
2025-08-09T10:55:26.6357637Z SKIP_QEMU_TEST=true
2025-08-09T10:55:26.6357949Z CLUSTER_MODE=main
2025-08-09T10:55:26.6358142Z SKIP_CONNECTIVITY_CHECK=true
2025-08-09T10:55:26.6358356Z ENABLE_GUI=false
2025-08-09T10:55:26.6358765Z + echo '=== Disk Usage ==='
2025-08-09T10:55:26.6359152Z === Disk Usage ===
2025-08-09T10:55:26.6360267Z + df -h
2025-08-09T10:55:26.6371214Z Filesystem      Size  Used Avail Use% Mounted on
2025-08-09T10:55:26.6371702Z /dev/root        73G   38G   36G  52% /
2025-08-09T10:55:26.6372142Z tmpfs           7.9G  172K  7.9G   1% /dev/shm
2025-08-09T10:55:26.6372601Z tmpfs           3.2G  1.1M  3.2G   1% /run
2025-08-09T10:55:26.6373036Z tmpfs           5.0M     0  5.0M   0% /run/lock
2025-08-09T10:55:26.6373473Z + echo '=== Memory Usage ==='
2025-08-09T10:55:26.6373817Z + free -h
2025-08-09T10:55:26.6374115Z /dev/sdb15      105M  6.1M   99M   6% /boot/efi
2025-08-09T10:55:26.6374543Z /dev/sda1        74G  4.1G   66G   6% /mnt
2025-08-09T10:55:26.6374994Z tmpfs           1.6G   12K  1.6G   1% /run/user/1001
2025-08-09T10:55:26.6375433Z tmpfs           7.9G     0  7.9G   0% /run/qemu
2025-08-09T10:55:26.6375832Z === Memory Usage ===
2025-08-09T10:55:26.6389294Z                total        used        free      shared  buff/cache   available
2025-08-09T10:55:26.6389888Z Mem:            15Gi       596Mi        10Gi        44Mi       4.8Gi        14Gi
2025-08-09T10:55:26.6390422Z Swap:          4.0Gi          0B       4.0Gi
2025-08-09T10:55:26.6392132Z + exit 1
2025-08-09T10:55:26.6407283Z ##[error]Process completed with exit code 1.
